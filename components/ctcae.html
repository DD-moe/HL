<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="[Damian Bezara]">
    <meta name="description" content="Formularz CTCAE dla HL - ocena dziaÅ‚aÅ„ niepoÅ¼Ä…danych">
    <meta name="keywords" content="CTCAE, HL, formularz, ocena, zdrowie">
    <title>Formularz CTCAE dla HL</title>
    <script type="module" src="https://git.1ioe.top/HL/components/forms.js" blocking="render" data-opis="tools components"></script>
    <script type="module" src="https://git.1ioe.top/HL/components/interview.js" blocking="render" data-opis="utility components"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; }
        header { background-color: #4CAF50; color: white; text-align: center; padding: 1em; }
        main { margin-left: 1%; margin-top: 3em; margin-bottom: 3em; background: white; padding: 1% auto; max-width: 98%; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        footer { background-color: #222; color: white; text-align: center; padding: 1em; position: relative; bottom: 0; width: 100%; }
        table { width: 100%; border-collapse: collapse; background: white; margin: 20px auto; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background-color: #4CAF50; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        toggle-content{width: 100%;}
        .scrolable{
            overflow: auto;
            max-width: 100%;
            max-height: 100vh;
        }
        textarea{width: 90%;}
        custom-checkbox-group{width: 96%; margin-left: 2%;}
    </style>
</head>
<body>
    <header>
        <h1>Formularz CTCAE dla HL</h1>
    </header>
    <main>
        <p>ProszÄ™ wypeÅ‚niÄ‡ poniÅ¼szy formularz w celu oceny dziaÅ‚aÅ„ niepoÅ¼Ä…danych.</p>

        <toggle-content>
            <div slot="minimized" title="Kliknij, aby zobaczyÄ‡ wiÄ™cej"><h1>ðŸ”½Morfologia Krwii</h1></div>
            <div slot="expanded">
                <div class="scrolable">
                    <h3>Zobacz wyniki w morfologii krwii</h3>
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Anemia</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>Hemoglobin (Hgb) < LLN - 10.0 g/dL; < LLN - 6.2 mmol/L; < LLN - 100 g/L</td></tr>
                            <tr><td>Grade 2 <input type="checkbox" data-value="2"></td><td>Hgb <10.0 - 8.0 g/dL; <6.2 - 4.9 mmol/L; <100 - 80 g/L</td></tr>
                            <tr><td>Grade 3 <input type="checkbox" data-value="3"></td><td>Hgb <8.0 g/dL; <4.9 mmol/L; <80 g/L; transfusion indicated</td></tr>
                            <tr><td>Grade 4 <input type="checkbox" data-value="4"></td><td>Life-threatening consequences; urgent intervention indicated</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by a reduction in the amount of hemoglobin...</td></tr>
                        </table>
                    </custom-checkbox-group>

                    <custom-checkbox-group max="1" calc="max">
                        <h2>Eosinophilia</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>>ULN and >Baseline</td></tr>
                            <tr><td>Grade 2 </td><td>-</td></tr>
                            <tr><td>Grade 3 <input type="checkbox" data-value="3"></td><td>Steroids initiated</td></tr>
                            <tr><td>Grade 4 </td><td>-</td></tr>
                            <tr><td>Grade 5 </td><td>-</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by laboratory test results that indicate an increased number of eosinophils in the blood.</td></tr>
                        </table>
                    </custom-checkbox-group>
                    
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Febrile neutropenia</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>&lt;1000/mms with a single temperature of 38.3Â°C</td></tr>
                            <tr><td>Grade 2 </td><td>-</td></tr>
                            <tr><td>Grade 3 </td><td>-</td></tr>
                            <tr><td>Grade 4 </td><td>-</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Life threatening consequences; Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by a low neutrophil count (&lt;1000/mms) with a single temperature of 38.3Â°C or higher.</td></tr>
                        </table>
                    </custom-checkbox-group>
                    
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Hemolysis</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>Laboratory evidence of hemolysis</td></tr>
                            <tr><td>Grade 2 <input type="checkbox" data-value="2"></td><td>Evidence of hemolysis and 2 g/dL decrease in hemoglobin</td></tr>
                            <tr><td>Grade 3 <input type="checkbox" data-value="3"></td><td>Transfusion or medical intervention indicated (e.g., steroids)</td></tr>
                            <tr><td>Grade 4 </td><td>-</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Life threatening consequences; Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by the destruction of red blood cells (hemolysis).</td></tr>
                        </table>
                    </custom-checkbox-group>
                    
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Leukocytosis</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 </td><td> - </td></tr>
                            <tr><td>Grade 2 </td><td> - </td></tr>
                            <tr><td>Grade 3 <input type="checkbox" data-value="3"></td><td> >100,000/mm3 </td></tr>
                            <tr><td>Grade 4 <input type="checkbox" data-value="4"></td><td>Clinical manifestations of leucostasis; urgent intervention indicated</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by laboratory test results that indicate an increased number of white blood cells in the blood.</td></tr>
                        </table>
                    </custom-checkbox-group>
                </div>
            </div>
        </toggle-content>
        
        <toggle-content>
            <div slot="minimized" title="Kliknij, aby zobaczyÄ‡ wiÄ™cej"><h1>ðŸ”½EKG</h1></div>
            <div slot="expanded">
                <div class="scrolable">
                    <h3>Zobacz wyniki w EKG</h3>
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Asystole</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>Periods of asystole; non-urgent medical management indicated</td></tr>
                            <tr><td>Grade 2 </td><td> - </td></tr>
                            <tr><td>Grade 3 </td><td> - </td></tr>
                            <tr><td>Grade 4 <input type="checkbox" data-value="4"></td><td>Life-threatening consequences; urgent intervention indicated</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by a dysrhythmia without cardiac electrical activity. Typically, this is accompanied by cessation of the pumping function of the heart.</td></tr>
                        </table>
                    </custom-checkbox-group>

                    <custom-checkbox-group max="1" calc="max">
                        <h2>Atrial fibrillation</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>Asymptomatic, intervention not indicated</td></tr>
                            <tr><td>Grade 2 <input type="checkbox" data-value="2"></td><td>Non-urgent medical intervention indicated</td></tr>
                            <tr><td>Grade 3 <input type="checkbox" data-value="3"></td><td>Symptomatic, urgent intervention indicated; device (e.g., pacemaker); ablation; new onset</td></tr>
                            <tr><td>Grade 4 <input type="checkbox" data-value="4"></td><td>Life-threatening consequences; embolus requiring urgent intervention</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by a dysrhythmia without discernible P waves and an irregular ventricular response due to multiple reentry circuits. The rhythm disturbance originates above the ventricles.</td></tr>
                        </table>
                    </custom-checkbox-group>
                    
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Atrial flutter</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>Asymptomatic, intervention not indicated</td></tr>
                            <tr><td>Grade 2 <input type="checkbox" data-value="2"></td><td>Non-urgent medical intervention indicated</td></tr>
                            <tr><td>Grade 3 <input type="checkbox" data-value="3"></td><td>Symptomatic, urgent intervention indicated; device (e.g., pacemaker); ablation</td></tr>
                            <tr><td>Grade 4 <input type="checkbox" data-value="4"></td><td>Life-threatening consequences; embolus requiring urgent intervention</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by a dysrhythmia with organized rhythmic atrial contractions with a rate of 200-300 beats per minute. The rhythm disturbance originates in the atria.</td></tr>
                        </table>
                    </custom-checkbox-group>
                    
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Atrioventricular block complete</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 </td><td> - </td></tr>
                            <tr><td>Grade 2 <input type="checkbox" data-value="2"></td><td>Non-urgent intervention indicated</td></tr>
                            <tr><td>Grade 3 <input type="checkbox" data-value="3"></td><td>Symptomatic and incompletely controlled medically, or controlled with device (e.g., pacemaker); new onset</td></tr>
                            <tr><td>Grade 4 <input type="checkbox" data-value="4"></td><td>Life-threatening consequences; urgent intervention indicated</td></tr>
                            <tr><td>Grade 5 <input type="checkbox" data-value="5"></td><td>Death</td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by a dysrhythmia with complete failure of atrial electrical impulse conduction through the AV node to the ventricles.</td></tr>
                        </table>
                    </custom-checkbox-group>
                    
                    <custom-checkbox-group max="1" calc="max">
                        <h2>Atrioventricular block first degree</h2>
                        <table>
                            <tr><th>Kategoria</th><th>Opis</th></tr>
                            <tr><td>Grade 1 <input type="checkbox" data-value="1"></td><td>Asymptomatic, intervention not indicated</td></tr>
                            <tr><td>Grade 2 <input type="checkbox" data-value="2"></td><td>Non-urgent intervention indicated</td></tr>
                            <tr><td>Grade 3 </td><td> - </td></tr>
                            <tr><td>Grade 4 </td><td> - </td></tr>
                            <tr><td>Grade 5 </td><td> - </td></tr>
                            <tr><td>Definition</td><td>A disorder characterized by a dysrhythmia with a delay in the time required for the conduction of an electrical impulse through the atrioventricular (AV) node beyond 0.2 seconds; prolongation of the PR interval greater than 200 milliseconds.</td></tr>
                        </table>
                    </custom-checkbox-group>
                </div>
            </div>
        </toggle-content> 
        
        <div>
            <!-- Dane pacjenta -->
            <label><h3>ID pacjenta: </h3><encoder-component id="patient-id"></encoder-component></label>
            <label><h3>Data pobytu: </h3><encoder-component id="stay-date"></encoder-component></label>
            <label><h3>Schemat leczenia: </h3><br><textarea id="treatment-plan"></textarea><br>
            <button id="summarize-btn">Podsumuj</button>

            <!-- Miejsce na tabelÄ™ wynikowÄ… -->
            <div id="summary-output"></div>            
        </div>

        <script>
            document.getElementById('summarize-btn').addEventListener('click', () => {
                const summaryDiv = document.getElementById('summary-output');
                summaryDiv.innerHTML = ''; // CzyÅ›ci stare podsumowanie
    
                // Pobranie danych pacjenta
                const patientId = document.getElementById('patient-id').shadowRoot.getElementById("text").value;
                const stayDate = document.getElementById('stay-date').shadowRoot.getElementById("text").value;
                const treatmentPlan = document.getElementById('treatment-plan').value;
    
                // Tworzenie tabeli
                const table = document.createElement('table');
                table.border = "1";
                const headerRow = table.insertRow();
                headerRow.innerHTML = "<th>Parametr</th><th>Ocena CTCAE</th>";
    
                // Dodanie danych pacjenta na poczÄ…tku tabeli
                const patientData = [
                    ["ID Pacjenta", patientId],
                    ["Data pobytu", stayDate],
                    ["Schemat leczenia", treatmentPlan]
                ];
                patientData.forEach(([label, value]) => {
                    const row = table.insertRow();
                    row.innerHTML = `<td><b>${label}</b></td><td>${value}</td>`;
                });
    
                // Pobieranie wartoÅ›ci z custom-checkbox-group
                document.querySelectorAll('custom-checkbox-group').forEach(group => {
                    const title = group.querySelector('h2')?.textContent || "Brak nazwy";
                    const shadowRoot = group.shadowRoot;
                    const resultSpan = shadowRoot?.querySelector('#result');
                    const value = resultSpan ? resultSpan.textContent.trim() : "Brak wartoÅ›ci";
    
                    const row = table.insertRow();
                    row.innerHTML = `<td>${title}</td><td>${value}</td>`;
                });
    
                // Dodanie tabeli do dokumentu
                summaryDiv.appendChild(table);
            });
        </script>

    </main>
    <footer>
        <p>&copy; <span id="year"></span> [Damian Bezara]. Wszelkie prawa zastrzeÅ¼one.</p>
        <script>
            document.getElementById("year").textContent = new Date().getFullYear();
        </script>
    </footer>
</body>
</html>